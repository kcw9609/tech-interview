# Git 서버
## 프로토콜
Git은 Local, HTTP, SSH, Git 이렇게 네 가지의 프로토콜을 사용할 수 있다. 

### 로컬 프로토콜
리모트 저장소가 단순히 같은 시스템의 다른 디렉토리에 있을 떄 사용한다.
```
$ git clone /srv/git/project.git
$ git clone file:///srv/git/project.git
```
이미 가진 Git 프로젝트에서는 다음과 같이 로컬 저장소를 추가한다.
```
$ git remote add local_proj /srv/git/project.git
```
그러면 네트워크에 있는 리모트 저장소처럼 local_proj 이름으로 리모트처럼 Push 하거나 Pull 할 수 있다.
- 장점
간단하다. 기존에 있던 네트워크나 파일의 권한을 그대로 사용하기 때문에 설정하기 쉽다. 동료의 코드를 쉽게 가져올 수 있다.
- 단점
다양한 상황에서 접근할 수 있도록 공유하는 것 자체가 일반적으로 어렵다. 느리다. 우발적인 사고가 발생하지 않도록 보호받지 못한다.

### HTTP 프로토콜
Git 은 Http로 통신할 때, 서로 다른 두 방법으로 HTTP를 사용할 수 있다. 스마트 HTTP, 멍청한 HTTP 두 종류가 있다. 
- 스마트 HTTP(HTTPS)
SSH나 Git 프로토콜처럼 통신한다. 다만 HTTP나 HTTPS 포트를 이용해 통신하고 다양한 HTTP 인증 방식을 사용한다는 것이 다르다.

지금은 Git에서 가장 많이 사용하는 프로토콜이다. git:// 프로토콜처럼 익명으로 사용 가능, SSH처럼 인증을 거쳐 Push할 수 있기 때문이다. 

- 멍청한 HTTP
Git 서버가 스마트 HTTP 요청에 응답하지 않으면 Git 클라이언트는 차선책으로 멍청한 HTTP 프로토콜을 시도한다.
정적 파일 방식으로 단순히 데이터를 제공하는 방식이라, 효율이 떨어지고 쓰기 기능이 제한적이다.


### SSH 프로토콜
Git의 대표 프로토콜은 SSH이다. 그리고 SSH는 인증 기능이 있고 어디에서든 사용할 수 있으며 사용하기도 쉽다.
```
$ git clone ssh://[user@]server/project.git
$ git clone [user@]server:project.git
```
- 장점
상대적으로 설정하기 쉽다. 보안에 안전하다. 모든 데이터는 암호화되어 인증된 상태로 전송된다. 마지막으로 SSH는 HTTPS, Local 프로토콜과 마찬가지로 전송 시 데이터를 가능한 압축하기 때문에 효율적이다.
- 단점
SSH는 익명으로 접근할 수 없다.
### Git 프로토콜
Git 프로토콜은 Git에 포함된 데몬을 사용하는 것이다. 포트는 9418이며 SSH 프로토콜과 비슷한 서비스를 제공하지만, 인증 메커니즘이 없다. 저장소에 git-export-daemon-ok 파일을 만들면 Git 프로토콜로 서비스할 수 있지만, 보안은 없다. 이 파일이 없는 저장소는 서비스되지 않는다.이 저장소는 누구나 Clone 할 수 있거나 아무도 Clone 할 수 없거나 둘 중의 하나만 선택할 수 있다.
- 장점
전송 속도가 가장 빠르다. 전송량이 많은 공개 프로젝트나 별도의 인증이 필요 없고 읽기만 허용하는 프로젝트를 서비스할 때 유용하다.
- 단점
인증 메커니즘이 없다. Git 프로토콜만으로 접근할 수 있는 프로젝트는 바람직하지 못하다. 일반적으로 SSH나 HTTPS 프로토콜과 함께 사용한다. 소수의 개발자만 Push 할 수 있고 대다수 사람은 git:// 을 사용하여 읽을 수만 있게 하는 것이다. 
